# Caddy / TLS
# DOMAIN is the hostname Caddy will serve + obtain a public TLS cert for (Let's Encrypt).
# - If you use a custom domain: DOMAIN=example.com
# - If you don't care about a custom domain, you can use the Lightsail public hostname
#   (typically like: <name>.<region>.cs.amazonlightsail.com)
DOMAIN=example.com

# ACME_EMAIL is for Let's Encrypt (ACME) account notifications (NOT SMTP).
ACME_EMAIL=you@example.com

# Chat API
LOG_LEVEL=INFO
DEBUG_ERRORS=0

# SECURITY: Trust proxy headers ONLY from these upstream IPs/CIDRs.
# This controls whether Uvicorn will accept X-Forwarded-For / Forwarded as the "real" client IP.
# In this stack, only the Caddy container should be upstream; Docker bridge networks are commonly in 172.16.0.0/12.
# If you define an explicit docker network/subnet, set this to that subnet (or the exact Caddy container IP).
FORWARDED_ALLOW_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,127.0.0.1,::1

# Model provider selection: anthropic (default) or openai
MODEL_PROVIDER=anthropic

# OpenAI (always required for embeddings)
OPENAI_API_KEY=
OPENAI_EMBED_MODEL=text-embedding-3-small
EMBEDDING_DIM=1536
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_ROUTER_MODEL=gpt-5-nano

# Anthropic (required if MODEL_PROVIDER=anthropic)
ANTHROPIC_API_KEY=
ANTHROPIC_CHAT_MODEL=claude-sonnet-4-20250514
ANTHROPIC_ROUTER_MODEL=claude-sonnet-4-20250514
ANTHROPIC_MAX_TOKENS=4096

# Retrieval
RETRIEVAL_K=40

# AWS / DynamoDB (Share snapshots)
AWS_REGION=eu-central-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
DDB_TABLE_SHARE_SNAPSHOTS=conversation_share_snapshots_v1

# Qdrant (internal Docker network by default)
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION_ITEMS=content_items_v1
QDRANT_COLLECTION_CHUNKS=content_chunks_v1

# If set to 1, the API will auto-create empty collections on startup.
# Default is 0 so missing collections error out explicitly until ingestion has run.
QDRANT_AUTO_CREATE_COLLECTIONS=0

# Contact form (SMTP) â€” required if you want /api/contact enabled end-to-end
SMTP_HOST=
SMTP_PORT=465
SMTP_USE_SSL=true
SMTP_USE_STARTTLS=false
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=
CONTACT_TO_EMAIL=
CONTACT_SUBJECT_PREFIX=[resume-web] Contact
SMTP_TIMEOUT_SECONDS=10

# Rate limiting
RATE_LIMIT_ENABLED=1              # Enable/disable (default: 1)
RATE_LIMIT_DAILY=100              # Daily limit per IP
RATE_LIMIT_BURST=10               # Burst limit per minute per IP
RATE_LIMIT_GLOBAL_BURST=50        # Global burst limit
RATE_LIMIT_CONVERSATION_PER_IP=20 # Max new conversation IDs per hour per IP
